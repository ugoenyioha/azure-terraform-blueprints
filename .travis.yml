dist: trusty
sudo: required

branches:
  only:
    - master

env:
  global:
    # This environment variable tells Terraform not to prompt for input. This is
    # not required, but if we make a mistake, the Travis builder will hang waiting
    # for user input, tying up unnecessary resources.
    - TF_INPUT=false

    - GH_USERNAME="TravisCI"
    - GH_USER_EMAIL="ugo.enyioha@usableapps.io"
    - GH_REPO=ugoenyioha/azure-terraform-blueprints

#install terraform
before_install:
  - chmod +x scripts/install_terraform.sh
  - scripts/install_terraform.sh

script:
  - terraform plan

# terraform apply
deploy:
  - provider: script
    skip_cleanup: true
    script: "scripts/deploy.sh"
    on:
      repo:
      branch: master